(window.webpackJsonp=window.webpackJsonp||[]).push([[65,54],{437:function(e,t,n){"use strict";var o=n(3),r=(n(20),{methods:{setErrors:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(l in r={},e)r[l]=[n.$t("back_error.".concat(e[l]))];return o.next=4,n.$refs[t].setErrors(r);case 4:n.scrollToError();case 5:case"end":return o.stop()}}),o)})))()},scrollToError:function(){var e=document.querySelector(".validate-error");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}}),l=n(5),component=Object(l.a)(r,undefined,undefined,!1,null,null,null);t.a=component.exports},455:function(e,t,n){"use strict";n(94);var o={data:function(){return{currentValue:""}},components:{TheMask:n(95).TheMask},props:{placeholder:{type:String,default:"-- -- --"},label:{type:String,required:!1}},methods:{clearInput:function(){this.$refs.maskClearText.display=""},update:function(e){e.isTrusted?(this.$emit("input",e.target.value),this.$emit("inputEvent",e)):this.$emit("input",e.target.value)},focus:function(e){this.currentValue=e.target.value,this.$emit("focus")},blur:function(e){e.target.value!==this.currentValue&&this.$emit("change",e.target.value),this.$emit("blur")},copy:function(){this.$emit("copy")},paste:function(){this.$emit("paste")},mouseDown:function(){this.$emit("mouseDown")},keyup:function(e){this.$emit("keyup",e.key)},keydown:function(e){this.$emit("repeatInput",e.repeat)}}},r=n(5),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dt-input-block"},[e.label?n("p",{staticClass:"dt-input-block__label"},[e._v(e._s(e.label))]):e._e(),e._v(" "),n("the-mask",{ref:"maskClearText",attrs:{type:"tel",masked:!0,placeholder:e.placeholder,"data-test":"code-input",mask:["#####"]},nativeOn:{input:function(t){return e.update(t)},focus:function(t){return e.focus(t)},blur:function(t){return e.blur(t)},copy:function(t){return e.copy(t)},paste:function(t){return e.paste(t)},mousedown:function(t){return e.mouseDown(t)},keyup:function(t){return e.keyup(t)},keydown:function(t){return e.keydown(t)}}}),e._v(" "),e._t("default")],2)}),[],!1,null,null,null);t.a=component.exports},608:function(e,t,n){var content=n(789);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(49).default)("a7e9e54e",content,!0,{sourceMap:!1})},788:function(e,t,n){"use strict";n(608)},789:function(e,t,n){var o=n(48)(!1);o.push([e.i,".dt-login{padding:30px 15px 20px;margin-left:auto;margin-right:auto}.dt-login .dt-error-message{position:absolute;width:-webkit-max-content;width:-moz-max-content;width:max-content;transform:translateX(20px);left:100%;margin-top:0;top:-5px}.dt-login .dt-button-white{height:45px;width:240px}.dt-login .dt-input-block__label{position:absolute;display:flex;height:40px;align-items:center;left:-150px}.dt-login .dt-input-block{margin-bottom:20px}.dt-login .dt-method-buttons{position:relative;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:20px}.dt-login .dt-method-buttons__light{width:48%;font-size:14px;height:40px}.dt-login__container{max-width:340px;width:100%;margin:auto;position:relative}.dt-login__main-title{font-size:22px;font-weight:600;margin:0 0 20px}.dt-login__error{margin-top:-15px;margin-bottom:20px;border-radius:5px;padding:5px;align-items:center;background:#dd4a37;font-weight:300;color:#fff;display:flex}.dt-link-text{opacity:1;margin-top:20px;color:#171a23}.dt-login a{color:#000}.btn-like-link{font-size:1em}@media (max-width:1200px){.dt-login__container{font-size:18px}.dt-login .dt-error-message{position:static;width:100%;transform:none;margin-top:5px}.dt-login .dt-input-block__label{display:none}}@media (max-width:480px){.dt-login{padding:15px 20px 20px}.dt-login .dt-button-white{width:100%}.dt-login .dt-link-text{margin-right:auto;margin-left:auto}.dt-login__main-title{font-size:22px;text-transform:uppercase;text-align:center;font-weight:400}.dt-login__info-container{font-size:14px}}",""]),e.exports=o},854:function(e,t,n){"use strict";n.r(t);var o=n(3),r=(n(20),n(91),n(50),n(18),n(455)),l=n(152),d=n(153),c=n(157),m=n(151),h=n(437),_={middleware:"satellite",head:function(){return{title:this.$t("titles.login")}},data:function(){return{email:"",smsCode:"",password:"",phone:"+380 (",phoneForSms:"",errorMessage:"",secondsLeftToRepeatSms:0,isUserIdentified:!1,isCodeSendBlocked:!1,isShowTelephoneForm:!0,isNeedSendRepeatSms:!1}},watch:{secondsLeftToRepeatSms:function(){var e=this;this.secondsLeftToRepeatSms>0&&setTimeout((function(){e.secondsLeftToRepeatSms--}),1e3)}},methods:{hideLoginError:function(){this.errorMessage&&(this.errorMessage="")},isTelephoneTab:function(e){this.isShowTelephoneForm=e},onSubmit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isUserIdentified?e.sendCode():e.identifyUser();case 1:case"end":return t.stop()}}),t)})))()},identifyUser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.login_observer.validate();case 2:if(!t.sent){t.next=7;break}return e.$store.commit("setIsShowPreloader",!0),t.next=6,e.$axios.$post("/login_check",{username:e.isShowTelephoneForm?e.phone.replace(/\D/g,""):e.email,password:e.password}).then((function(t){e.secondsLeftToRepeatSms=60,e.phoneForSms=t.details.phone_mask,e.isUserIdentified=!0})).catch((function(t){switch(+t.response.status){case 429:30===t.response.data.details.blocking_minutes?e.isCodeSendBlocked=!0:e.secondsLeftToRepeatSms=60,e.phoneForSms=t.response.data.details.phone_mask,e.isUserIdentified=!0;break;case 401:window.dataLayer.push({event:"autoEvent",eventLabel:"Авторизация - Неверный логин или пароль",eventAction:"Не отправлена",eventCategory:"Форма",eventNonInteraction:"False"}),e.errorMessage=e.$t("login.wrong_data");break;default:e.errorMessage=e.$t("login.server_error"),window.dataLayer.push({event:"autoEvent",eventLabel:"Авторизация - Ошибка сервера",eventAction:"Не отправлена",eventCategory:"Форма",eventNonInteraction:"False"})}}));case 6:e.$store.commit("setIsShowPreloader",!1);case 7:case"end":return t.stop()}}),t)})))()},sendCode:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.sms_code_observer.validate();case 2:if(!t.sent){t.next=6;break}return e.$store.commit("setIsShowPreloader",!0),t.next=6,e.$axios.$post("/login/code-check",{code:e.smsCode}).then((function(t){e.$login({token:t.details.token}).then((function(){location.href=e.localePath("cabinet")}))})).catch((function(t){switch(e.hideLoginError(),+t.response.status){case 429:30===t.response.data.details.blocking_minutes&&(e.isCodeSendBlocked=!0);break;case 422:e.errorMessage=e.$t("back_error.incorrect");break;case 423:e.isNeedSendRepeatSms=!0;break;default:e.errorMessage=e.$t("login.server_error")}e.$store.commit("setIsShowPreloader",!1)}));case 6:case"end":return t.stop()}}),t)})))()},onRepeatSms:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.secondsLeftToRepeatSms){t.next=4;break}return e.$store.commit("setIsShowPreloader",!0),t.next=4,e.$axios.$get("/login/repeat-sms").then((function(t){e.smsCode="",e.phoneForSms=t.details.phone_mask,e.isNeedSendRepeatSms=!1,e.secondsLeftToRepeatSms=60})).catch((function(t){switch(+t.response.status){case 429:e.isCodeSendBlocked=!0;break;default:e.errorMessage=e.$t("login.server_error")}}));case 4:e.$store.commit("setIsShowPreloader",!1);case 5:case"end":return t.stop()}}),t)})))()}},nuxtI18n:{paths:{ru:"/vhod",ua:"/vhid"}},mixins:[h.a],components:{SmsCode:r.a,TextInput:l.a,PhoneInput:d.a,PasswordInput:c.a,ValidationError:m.a}},f=(n(788),n(5)),component=Object(f.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dt-login"},[n("div",{staticClass:"dt-login__container"},[n("h1",{staticClass:"dt-login__main-title"},[e._v(e._s(e.$t("login.main_title")))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isUserIdentified,expression:"!isUserIdentified"}]},[n("div",{staticClass:"dt-method-buttons"},[n("p",{staticClass:"dt-input-block__label"},[e._v(e._s(e.$t("login.select_label")))]),e._v(" "),n("div",{staticClass:"dt-method-buttons__light dt-noselect",class:{"dt-method-buttons__dark":e.isShowTelephoneForm},attrs:{"data-test":"login-tab_1"},on:{click:function(t){t.stopPropagation(),e.isShowTelephoneForm=!0}}},[e._v("\n          "+e._s(e.$t("login.authorization_phone"))+"\n        ")]),e._v(" "),n("div",{staticClass:"dt-method-buttons__light dt-noselect",class:{"dt-method-buttons__dark":!e.isShowTelephoneForm},attrs:{"data-test":"login-tab_2"},on:{click:function(t){t.stopPropagation(),e.isShowTelephoneForm=!1}}},[e._v("\n          E-mail\n        ")])]),e._v(" "),n("ValidationObserver",{ref:"login_observer"},[e.isShowTelephoneForm?n("ValidationProvider",{attrs:{vid:"phone",name:e.$t("validator.phone"),rules:{required:!0,regex:/^\+380\s\([0-9]{2}\)\s[0-9]{3}\-[0-9]{2}\-[0-9]{2}$/}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[n("PhoneInput",{class:{"validate-error":o.length},attrs:{value:e.phone,"data-test":"login-phone",label:e.$t("login.phone_label")},on:{focus:e.hideLoginError},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}},[o.length?n("validation-error",{attrs:{message:o[0]}}):e._e()],1)]}}],null,!1,2391816543)}):n("ValidationProvider",{attrs:{vid:"email",name:"Email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[n("TextInput",{class:{"validate-error":o.length},attrs:{value:e.email,"data-test":"login-email",placeholder:"Email",label:"E-mail"},on:{focus:e.hideLoginError},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}},[o.length?n("validation-error",{attrs:{message:o[0]}}):e._e()],1)]}}])}),e._v(" "),n("ValidationProvider",{attrs:{vid:"password",name:e.$t("validator.password"),rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[n("PasswordInput",{class:{"validate-error":o.length},attrs:{value:e.password,"data-test":"login-password",placeholder:e.$t("login.password_label"),label:e.$t("login.password_label")},on:{focus:e.hideLoginError},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[o.length?n("validation-error",{attrs:{message:o[0]}}):e._e()],1)]}}])})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage,expression:"errorMessage"}],staticClass:"dt-login__error"},[n("div",{staticClass:"dt-error-message__icon"},[e._v("!")]),e._v(" "),n("p",{staticClass:"dt-error-message__text"},[e._v(e._s(e.errorMessage))])])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isUserIdentified,expression:"isUserIdentified"}]},[n("ValidationObserver",{directives:[{name:"show",rawName:"v-show",value:!e.isNeedSendRepeatSms,expression:"!isNeedSendRepeatSms"}],ref:"sms_code_observer"},[n("ValidationProvider",{attrs:{vid:"sms_code",name:e.$t("validator.code"),rules:"required|digits:5"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[n("SmsCode",{class:{"validate-error":o.length},attrs:{label:e.$t("validator.code")},on:{focus:e.hideLoginError},model:{value:e.smsCode,callback:function(t){e.smsCode=t},expression:"smsCode"}},[o.length?n("validation-error",{attrs:{message:o[0]}}):e._e()],1)]}}])})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.errorMessage,expression:"errorMessage"}],staticClass:"dt-login__error"},[n("div",{staticClass:"dt-error-message__icon"},[e._v("!")]),e._v(" "),n("p",{staticClass:"dt-error-message__text"},[e._v(e._s(e.errorMessage))])]),e._v(" "),e._e(),e._v(" "),e.isCodeSendBlocked?n("p",[e._v("\n        "+e._s(e.$t("login.sms_code.limit_reached"))+"\n      ")]):[e.isNeedSendRepeatSms?n("p",[e._v("\n          "+e._s(e.$t("login.sms_code.sms_token_max_attempts"))+' "'+e._s(e.$t("login.sms_code.repeat.btn").toLowerCase())+'"\n        ')]):n("p",[n("span",[e._v(e._s(e.$t("login.sms_code.txt.first")))]),e._v("\n          "+e._s(e.phoneForSms)+"\n          "),n("br"),e._v(" "),n("span",[e._v(e._s(e.$t("login.sms_code.txt.last")))])]),e._v(" "),n("p",[n("span",{directives:[{name:"show",rawName:"v-show",value:e.secondsLeftToRepeatSms>0,expression:"secondsLeftToRepeatSms > 0"}]},[e._v("\n            "+e._s(e.$t("login.sms_code.repeat.timer"))+"\n            "),n("b",[e._v("0:"+e._s(e.secondsLeftToRepeatSms>=10?e.secondsLeftToRepeatSms:"0"+e.secondsLeftToRepeatSms))])]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.secondsLeftToRepeatSms<=0,expression:"secondsLeftToRepeatSms <= 0"}],staticClass:"btn-like-link",attrs:{type:"button"},on:{click:e.onRepeatSms}},[e._v("\n            "+e._s(e.$t("login.sms_code.repeat.btn"))+"\n          ")])])]],2),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isNeedSendRepeatSms,expression:"!isNeedSendRepeatSms"}],staticClass:"dt-button-white",attrs:{type:"button","data-test":"login-submit"},on:{click:e.onSubmit}},[e._v("\n      "+e._s(e.$t("login.in_button"))+"\n    ")]),e._v(" "),e.isUserIdentified?e._e():[n("nuxt-link",{staticClass:"dt-link-text",attrs:{to:e.localePath("pass_recovery"),"data-test":"login-forgot"}},[e._v("\n        "+e._s(e.$t("login.forget_text"))+"\n      ")]),e._v(" "),n("nuxt-link",{staticClass:"dt-link-text",attrs:{to:e.localePath("phone_change"),"data-test":"login-phone_change"}},[e._v("\n        "+e._s(e.$t("login.phone_change_link"))+"\n      ")]),e._v(" "),n("div",{staticClass:"dt-login__info-container"},[n("p",[e._v("\n          "+e._s(e.$t("login.info_first"))+"\n          "),n("br"),e._v("\n          "+e._s(e.$t("login.info_second"))+"\n          "),n("nuxt-link",{attrs:{"data-test":"login-info_link",to:e.localePath("index")}},[e._v(e._s(e.$t("login.info_third")))]),e._v("\n          "+e._s(e.$t("login.info_fourth"))+"\n        ")],1)])]],2)])}),[],!1,null,null,null);t.default=component.exports}}]);
//# sourceMappingURL=b53b26b.js.map